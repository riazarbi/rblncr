<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction • rblncr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction">
<meta property="og:description" content="rblncr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rblncr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/balance_or_die.html">Balance or Die</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/scheduled_rebalance.html">Scheduled rebalancing</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/riazarbi/rblncr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/riazarbi/rblncr/blob/HEAD/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="hidden name"><code>introduction.Rmd</code></div>

    </div>

    
    
<p>This vignette provides a high level introduction to the
<code>rblncr</code> package. You can use the functions in this package
to:</p>
<ul>
<li>Create a model portfolio</li>
<li>Query your existing brokerage account to obtain your current
holdings</li>
<li>Automatically rebalance your brokerage account so that the holdings
mirror your model portfolio</li>
</ul>
<div class="section level2">
<h2 id="create-a-portfolio-model">Create a portfolio model<a class="anchor" aria-label="anchor" href="#create-a-portfolio-model"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://riazarbi.github.io/rblncr/" class="external-link">rblncr</a></span><span class="op">)</span></span></code></pre></div>
<p>A portfolio model is an R <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> that is structured in a
particular way. It provides information to <code>rblncr</code> functions
about what asset allocations you want. You can write a portfolio model
list to disk with the function <code><a href="../reference/save_portfolio_model.html">save_portfolio_model()</a></code>. It
is written in <code>yaml</code> format. Here is an example of a model
portfolio that was written to disk.</p>
<pre><code>name: sample_portfolio
description: create from function
cash:
  percent: 5
assets:
- symbol: AAPL
  percent: 30
- symbol: GOOG
  percent: 30
- symbol: VT
  percent: 30
- symbol: TSLA
  percent: 5
tolerance:
  percent: 5
cooldown:
  days: 365
created_at: 2022-10-24T11:22:01
updated_at: 2022-10-24T11:22:01</code></pre>
<p>Here is how you would create a portfolio model from scratch, write it
to disk, and then read it.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"sample_portfolio"</span></span>
<span><span class="va">description</span> <span class="op">&lt;-</span> <span class="st">"create from function"</span></span>
<span><span class="va">cash</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">assets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>symbol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AAPL"</span>,<span class="st">"GOOG"</span><span class="op">)</span>, percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80.5</span>,<span class="fl">9.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tolerance</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">cooldown</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>days <span class="op">=</span> <span class="fl">365</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_portfolio_model.html">create_portfolio_model</a></span><span class="op">(</span>name <span class="op">=</span> <span class="va">name</span>,</span>
<span>                      description <span class="op">=</span> <span class="va">description</span>,</span>
<span>                      cash <span class="op">=</span> <span class="va">cash</span>,</span>
<span>                      assets <span class="op">=</span> <span class="va">assets</span>,</span>
<span>                      tolerance <span class="op">=</span> <span class="va">tolerance</span>,</span>
<span>                      cooldown <span class="op">=</span> <span class="va">cooldown</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 8</span></span>
<span><span class="co">#&gt;  $ name       : chr "sample_portfolio"</span></span>
<span><span class="co">#&gt;  $ description: chr "create from function"</span></span>
<span><span class="co">#&gt;  $ cash       :List of 1</span></span>
<span><span class="co">#&gt;   ..$ percent: num 10</span></span>
<span><span class="co">#&gt;  $ assets     :'data.frame': 2 obs. of  2 variables:</span></span>
<span><span class="co">#&gt;   ..$ symbol : chr [1:2] "AAPL" "GOOG"</span></span>
<span><span class="co">#&gt;   ..$ percent: num [1:2] 80.5 9.5</span></span>
<span><span class="co">#&gt;  $ tolerance  :List of 1</span></span>
<span><span class="co">#&gt;   ..$ percent: num 5</span></span>
<span><span class="co">#&gt;  $ cooldown   :List of 1</span></span>
<span><span class="co">#&gt;   ..$ days: num 365</span></span>
<span><span class="co">#&gt;  $ created_at : chr "2022-11-07T14:52:08"</span></span>
<span><span class="co">#&gt;  $ updated_at : chr "2022-11-07T14:52:08"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/save_portfolio_model.html">save_portfolio_model</a></span><span class="op">(</span><span class="va">model</span>, <span class="st">"/tmp/model.yaml"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/model.yaml"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-brokerage-account-holdings">Get brokerage account holdings<a class="anchor" aria-label="anchor" href="#get-brokerage-account-holdings"></a>
</h2>
<p>In order to rebalance an existing portfolio, we need to talk to our
broker to find out what our current holdings are. In order to interact
with a broker we need to define a connection. A connection is just a
special function that tells downstream functions how to interact with a
broker.</p>
<p>We use the function <code>get_portfolio_current</code> to get the
current portfolio holdings.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># alpaca trading api</span></span>
<span><span class="va">t_conn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alpaca_connect.html">alpaca_connect</a></span><span class="op">(</span><span class="st">'paper'</span>,</span>
<span>                          <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ALPACA_PAPER_KEY"</span><span class="op">)</span>,</span>
<span>                          <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ALPACA_PAPER_SECRET"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># alpaca data api</span></span>
<span><span class="va">d_conn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alpaca_connect.html">alpaca_connect</a></span><span class="op">(</span><span class="st">'data'</span>,</span>
<span>                          <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ALPACA_LIVE_KEY"</span><span class="op">)</span>,</span>
<span>                          <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ALPACA_LIVE_SECRET"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">holdings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_portfolio_current.html">get_portfolio_current</a></span><span class="op">(</span><span class="va">t_conn</span><span class="op">)</span> </span>
<span><span class="va">holdings</span></span>
<span><span class="co">#&gt; $cash</span></span>
<span><span class="co">#&gt;   currency quantity_held</span></span>
<span><span class="co">#&gt; 1      USD      92962.31</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $assets</span></span>
<span><span class="co">#&gt;   symbol quantity_held</span></span>
<span><span class="co">#&gt; 1   AAPL          4719</span></span>
<span><span class="co">#&gt; 2   GOOG          2083</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="compute-balancing-orders">Compute Balancing Orders<a class="anchor" aria-label="anchor" href="#compute-balancing-orders"></a>
</h2>
<p>Once we have our holdings, we can load our target holdings from the
model.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">targets</span> <span class="op">&lt;-</span> <span class="va">holdings</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="../reference/load_portfolio_targets.html">load_portfolio_targets</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span> </span>
<span><span class="va">targets</span></span>
<span><span class="co">#&gt; $cash</span></span>
<span><span class="co">#&gt;   currency quantity_held percent_target</span></span>
<span><span class="co">#&gt; 1      USD      92962.31             10</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $assets</span></span>
<span><span class="co">#&gt;   symbol quantity_held percent_target</span></span>
<span><span class="co">#&gt; 1   AAPL          4719           80.5</span></span>
<span><span class="co">#&gt; 2   GOOG          2083            9.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tolerance</span></span>
<span><span class="co">#&gt; $tolerance$percent</span></span>
<span><span class="co">#&gt; [1] 5</span></span></code></pre></div>
<p>Now we know what we have, and what we need. But we need to translate
holdings to percentages to be able to compare them. We use the
<code><a href="../reference/price_portfolio.html">price_portfolio()</a></code> function for this. It gets prices from a
data connection and computes current holding values and percentages.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">priced</span> <span class="op">&lt;-</span> <span class="va">targets</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="../reference/price_portfolio.html">price_portfolio</a></span><span class="op">(</span>connection <span class="op">=</span> <span class="va">d_conn</span>, price_type <span class="op">=</span> <span class="st">'close'</span><span class="op">)</span> </span></code></pre></div>
<p>We can now use <code><a href="../reference/solve_portfolio.html">solve_portfolio()</a></code> to work out what orders
we need to submit to balance our portfolio.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">solution</span> <span class="op">&lt;-</span> <span class="va">priced</span><span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="../reference/solve_portfolio.html">solve_portfolio</a></span><span class="op">(</span>terse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span><span class="va">solution</span></span>
<span><span class="co">#&gt; $cash</span></span>
<span><span class="co">#&gt;   currency out_of_band optimal_value</span></span>
<span><span class="co">#&gt; 1      USD       FALSE      92704.93</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $assets</span></span>
<span><span class="co">#&gt;   symbol  price out_of_band optimal_order optimal_order_value</span></span>
<span><span class="co">#&gt; 1   AAPL 138.38        TRUE           671            92852.98</span></span>
<span><span class="co">#&gt; 2   GOOG  86.70        TRUE         -1068           -92595.60</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tolerance</span></span>
<span><span class="co">#&gt; $tolerance$percent</span></span>
<span><span class="co">#&gt; [1] 5</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="trade">Trade<a class="anchor" aria-label="anchor" href="#trade"></a>
</h2>
<p>At this point, we have enough information to submit orders to a
broker. However, it is prudent to make sure that our orders are properly
sized. Orders that are too big may move the market, and orders that are
too small may incure excessive fees and create unnecessary churn.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">orders</span> <span class="op">&lt;-</span> <span class="va">solution</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="../reference/constrain_orders.html">constrain_orders</a></span><span class="op">(</span><span class="va">d_conn</span>, </span>
<span>                  daily_vol_pct_limit <span class="op">=</span> <span class="fl">0.01</span>, </span>
<span>                  min_order_size <span class="op">=</span> <span class="fl">1000</span>, </span>
<span>                  max_order_size <span class="op">=</span> <span class="fl">10000</span> <span class="op">)</span></span>
<span><span class="va">orders</span></span>
<span><span class="co">#&gt;   symbol order    value</span></span>
<span><span class="co">#&gt; 1   AAPL    72  9963.36</span></span>
<span><span class="co">#&gt; 2   GOOG  -115 -9970.50</span></span></code></pre></div>
<p>Now that we have safely resized our orders, we can submit them to the
trader.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/trader.html">trader</a></span><span class="op">(</span><span class="va">orders</span>, </span>
<span>       trader_life <span class="op">=</span> <span class="fl">120</span>,</span>
<span>       resubmit_interval <span class="op">=</span> <span class="fl">5</span>,</span>
<span>       trading_connection <span class="op">=</span> <span class="va">t_conn</span>, </span>
<span>       pricing_connection <span class="op">=</span> <span class="va">d_conn</span><span class="op">)</span></span>
<span><span class="co">#&gt; there are 2 new orders to fill</span></span>
<span><span class="co">#&gt;  - pricing new orders</span></span>
<span><span class="co">#&gt;  - submitting orders</span></span>
<span><span class="co">#&gt;  - waiting 5 seconds for orders to fill</span></span>
<span><span class="co">#&gt;  - attempting to cancel all unfilled orders</span></span>
<span><span class="co">#&gt;  - all open orders cancelled</span></span>
<span><span class="co">#&gt;  - getting order statuses</span></span>
<span><span class="co">#&gt;  - calculating remaining order amounts</span></span>
<span><span class="co">#&gt; there are 1 new orders to fill</span></span>
<span><span class="co">#&gt;  - pricing new orders</span></span>
<span><span class="co">#&gt;  - submitting orders</span></span>
<span><span class="co">#&gt;  - waiting 5 seconds for orders to fill</span></span>
<span><span class="co">#&gt;  - attempting to cancel all unfilled orders</span></span>
<span><span class="co">#&gt;  - all open orders cancelled</span></span>
<span><span class="co">#&gt;  - getting order statuses</span></span>
<span><span class="co">#&gt;  - calculating remaining order amounts</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; commencing trader wind-down</span></span>
<span><span class="co">#&gt;  - attempting to cancel all unfilled orders</span></span>
<span><span class="co">#&gt;  - trader wind-down cancellation success</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; NO ORDERS TO EXECUTE. EXITING.</span></span>
<span><span class="co">#&gt;             timestamp symbol order  limit filled   status</span></span>
<span><span class="co">#&gt; 1                &lt;NA&gt;   AAPL    72     NA      0 no_limit</span></span>
<span><span class="co">#&gt; 2 2022-11-07 14:52:13   GOOG  -115  87.09   -115   filled</span></span>
<span><span class="co">#&gt; 3 2022-11-07 14:52:22   AAPL    72 135.73     72   filled</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="all-in-one">All in one<a class="anchor" aria-label="anchor" href="#all-in-one"></a>
</h2>
<p>The above code flow is useful if you want fine grained control of the
rebalancing process, or if you want to log data from the pipeline to
disk. Generally speaking, it is much more convenient to just use the
<code><a href="../reference/balance_portfolio.html">balance_portfolio()</a></code> wrapper function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/balance_portfolio.html">balance_portfolio</a></span><span class="op">(</span><span class="va">model</span>,</span>
<span>                  <span class="va">t_conn</span>,</span>
<span>                  <span class="va">d_conn</span>,</span>
<span>                  verbose <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co">#&gt; $portfolio_balanced</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $drift</span></span>
<span><span class="co">#&gt;   symbol drift</span></span>
<span><span class="co">#&gt; 1   AAPL 11.13</span></span>
<span><span class="co">#&gt; 2   GOOG 82.56</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $trades</span></span>
<span><span class="co">#&gt;             timestamp symbol order  limit filled   status</span></span>
<span><span class="co">#&gt; 1                &lt;NA&gt;   AAPL    72     NA      0 no_limit</span></span>
<span><span class="co">#&gt; 2 2022-11-07 14:52:34   GOOG  -115  87.18   -115   filled</span></span>
<span><span class="co">#&gt; 3 2022-11-07 14:52:43   AAPL    72 135.76      0 canceled</span></span>
<span><span class="co">#&gt; 4 2022-11-07 14:52:53   AAPL    72 135.89      0 canceled</span></span>
<span><span class="co">#&gt; 5                &lt;NA&gt;   AAPL    72     NA      0 no_limit</span></span></code></pre></div>
<p>Note that the <code><a href="../reference/balance_portfolio.html">balance_portfolio()</a></code> won’t necessarily
rebalance your portfolio! Because we care about constraining our order
size and price to get the best deals we can, the function will exit once
the trader timeout is reached. To guarantee that the portfolio is
rebalanced, we need to put <code><a href="../reference/balance_portfolio.html">balance_portfolio()</a></code> into a
<code>while</code> loop, and/or relax pricing and order size
constraints. See the ‘Balance or Die’ vignette for an example of how to
do this.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Riaz Arbi.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
